name: Build

on:
    push:
        branches: [master]
    pull_request:
        branches: [master]

jobs:
    build:
        runs-on: ubuntu-16.04
        strategy:
            matrix:
                deno: ['v1.0.0', 'v0.42.0', 'v1.x', 'v0.x', 'nightly']
        name: Run on Deno ${{ matrix.deno }}
        steps:
            - uses: actions/checkout@v2
            - name: Setup Deno
              uses: denolib/setup-deno@v2
              with:
                  deno-version: ${{ matrix.deno }}
            - run: |
                  deno --version
                  deno lint --unstable
                  deno run --allow-net=:5000 server.ts
